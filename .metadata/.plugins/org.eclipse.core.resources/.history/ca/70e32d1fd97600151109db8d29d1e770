package dao_module;

import java.util.ArrayList;

import org.json.simple.JSONObject;

import model.Cineplex;
import model.MOVIESTATUS;
import model.Movie;

public class MovieDAO extends JSONDAO{
	private JSONObject jsonObject = null;
	private ArrayList<Movie> movies = null;
	
	public MovieDAO(){
		this.jsonObject = readFile(JSONDAO.moviePath);
		parseJSON();
	}
	
	//@purpose	: create a movie listing with reviews
	//@param	: required
	//@return	: void
	public void createNewMovie(Movie movie){
		//TODO update the movie json object
		
		updateFile(JSONDAO.moviePath,this.jsonObject);
	}
	
	//@purpose	: update the movie listing with reviews
	//@param	: required
	//@return	: void
	public void updateMovie(Movie movie){
		//TODO update the movie json object
		
		updateFile(JSONDAO.moviePath,this.jsonObject);
	}
	
	//@purpose	: retrieve the movie listing with reviews
	//@param	: required
	//@return	: arraylist of movies
	@SuppressWarnings("null")
	public ArrayList<Movie> getAllMovieswithReviews(boolean include_END_OF_SHOWING){
		ArrayList<Movie> results = null;
		
		if(this.movies!=null&&this.movies.size()>0){
			for(int i = 0;i<this.movies.size();i++){
				if(include_END_OF_SHOWING){
					results.add(this.movies.get(i));
				}
				else{
					if(this.movies.get(i).getMovieStatus()!=MOVIESTATUS.END_OF_SHOWING){
						results.add(this.movies.get(i));
					}
				}
			}
		}
		return results;
	}
	
	//@purpose	: retrieve the movie listing with reviews by cineplex
	//@param	: required
	//@return	: arraylist of movies
	public ArrayList<Movie> getAllMoviesWithReviewsByCineplex(Cineplex cineplex, boolean include_END_OF_SHOWING){
		ArrayList<Movie> results = null;
		
		if(this.movies!=null&&this.movies.size()>0){
			
		}
			
		return results;
	}
	
	
	
	private void parseJSON(){
		if(this.jsonObject != null){
			//TODO: PARSE MOVIE JSON FILE
		}
	}
}
