package dao_module;

import java.util.ArrayList;

import org.json.simple.JSONObject;

import model.Cineplex;
import model.MOVIESTATUS;
import model.Movie;

public class MovieDAO extends JSONDAO{
	private JSONObject jsonObject = null;
	private ArrayList<Movie> movies = null;
	
	public MovieDAO(){
		this.jsonObject = readFile(JSONDAO.moviePath);
		parseJSON();
	}
	
	
	public void createNewMovie(Movie movie){
		
	}
	public void updateMovie(Movie movie){
		
	}
	
	//@purpose	: retrieve the movie listing with reviews
	//@param	: required
	//@return	: arraylist of movies
	public ArrayList<Movie> getAllMovieswithReviews(boolean include_END_OF_SHOWING){
		ArrayList<Movie> results = null;
		
		if(this.movies!=null&&this.movies.size()>0){
			for(int i = 0;i<this.movies.size();i++){
				if(this.movies.get(i).getMovieStatus()!=MOVIESTATUS.END_OF_SHOWING){
					for(int r=0;i<this.movies.get(i).getReviews().size();r++){
						this.movies.get(i).getReviews().get(r).setGuest(new GuestDAO().getGuestByEmailAndMobileNo(this.movies.get(i).getReviews().get(r).getGuestId()));;
						
					}
					
				}
			}
		}
		
		return results;
	}
	
	//@purpose	: retrieve the movie listing with reviews by cineplex
	//@param	: required
	//@return	: arraylist of movies
	public ArrayList<Movie> getAllMovieswithReviewsByCineplex(Cineplex cineplex, boolean include_END_OF_SHOWING){
		ArrayList<Movie> results = null;
			
		return results;
	}
	
	
	
	private void parseJSON(){
		if(this.jsonObject != null){
			//TODO: PARSE MOVIE JSON FILE
		}
	}
}
